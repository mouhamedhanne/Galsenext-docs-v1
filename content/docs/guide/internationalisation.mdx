---
title: Internationalisation
description: Guide complet pour configurer et utiliser Galsenext après l'installation.
---

# Configuration de l'Internationalisation (i18n) et des Providers

**Galsenext** est configuré pour prendre en charge l'internationalisation
(i18n), l'authentification, les thèmes, et bien plus. Cette section
fournit une explication détaillée sur la configuration des `Providers`
et sur leur utilisation pour que l'application soit prête à fonctionner.

## Configuration des Providers

Dans **Galsenext**, plusieurs providers sont utilisés pour la gestion de l'état global, des sessions utilisateur, des thèmes, et des traductions.

Voici la configuration du composant `Providers` :

### Composant `Providers`

```bash
"use client";

import { SessionProvider } from "next-auth/react";
import { ThemeProvider } from "next-themes";
import { PropsWithChildren } from "react";
import { Toaster } from "react-hot-toast";
import { AppProgressBar as ProgressBar } from "next-nprogress-bar";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { I18nProviderClient } from "@/locales/client";

const queryClient = new QueryClient();

export const Providers = (props: PropsWithChildren<{ locale: string }>) => {
  return (
    <>
      <ThemeProvider attribute="class" defaultTheme="system" enableSystem>
        <SessionProvider>
          <Toaster />
          <ProgressBar
            height="3px"
            color="#FFA500"
            options={{ showSpinner: false }}
            shallowRouting
          />
          <QueryClientProvider client={queryClient}>
            <I18nProviderClient locale={props.locale}>
              {props.children}
            </I18nProviderClient>
          </QueryClientProvider>
        </SessionProvider>
      </ThemeProvider>
    </>
  );
};

```

### Explication des Providers Utilisés

- **ThemeProvider** : Gère les thèmes de l'application (clair ou sombre).
- **SessionProvider** : Fournit des fonctionnalités d'authentification basées sur `next-auth`.
- **Toaster** : Gère les notifications utilisateurs.
- **ProgressBar** : Barre de progression pour indiquer le chargement de pages.
- **QueryClientProvider** : Gère les requêtes côté client via `react-query`.
- **I18nProviderClient** : Fournit les fonctionnalités d'internationalisation côté client.

## Intégration dans le Layout

Pour intégrer ces `Providers` dans votre application, vous devez les
envelopper autour de votre composant `RootLayout`. Voici un exemple de
configuration de `RootLayout` :

### Fichier `layout.tsx`

```bash
import type { Metadata } from "next";
import "./globals.css";
import { Providers } from "./Providers";

export const metadata: Metadata = {
  title: "Galsenext",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
  params,
}: Readonly<{
  children: React.ReactNode;
  params: {
    locale: string;
  };
}>) {
  return (
    <html lang={params.locale}>
      <body>
        <Providers locale={params.locale}>{children}</Providers>
      </body>
    </html>
  );
}
```

### Explication

- **RootLayout** : Ce composant enveloppe l'application et fournit le contexte global nécessaire pour le bon fonctionnement des différentes fonctionnalités, y compris les traductions, les thèmes, et les sessions.

## Configuration de l'Internationalisation (i18n)

Pour une application multilingue, la configuration de l'internationalisation est essentielle

### Configuration côté Client

Le code suivant configure le client pour supporter les traductions anglaises et françaises :

```bash
"use client";
import { createI18nClient } from "next-international/client";

export const {
  useI18n,
  useScopedI18n,
  I18nProviderClient,
  useCurrentLocale,
  useChangeLocale,
} = createI18nClient({
  en: () => import("./en"),
  fr: () => import("./fr"),
});
```

### Configuration côté Serveur

Le serveur utilise `createI18nServer` pour la gestion des traductions :

```bash
import { createI18nServer } from "next-international/server";

export const { getI18n, getScopedI18n, getStaticParams } = createI18nServer({
  en: () => import("./en"),
  fr: () => import("./fr"),
});
```

## Exemple d'Utilisation

Voici un exemple d'utilisation d'un composant avec `internationalisation`

```bash
import { getAuthSession } from "@/src/lib/auth";
import Link from "next/link";
import Container from "@/components/elements/Container";
import { LayoutHeader, LayoutTitle } from "@/src/components/Layout/Layout";
import { getI18n } from "@/locales/server";

export type AuthenticatedContentProps = { session: any };

const AuthenticatedContent: React.FC<AuthenticatedContentProps> = async ({
  session,
}: any) => {
  const t = await getI18n();
  return (
    <Container>
      <div className="container">
        <LayoutHeader>
          <LayoutTitle>Home page</LayoutTitle>
          <h2>{t("new")}</h2>
        </LayoutHeader>
      </div>
    </Container>
  );
};

export default AuthenticatedContent;
```

### Explication

- **getI18n** : Récupère les traductions côté serveur.
- **LayoutHeader et LayoutTitle** : Composants de mise en page pour la structure de l'application.
- **t("new")** : Utilise la fonction de traduction pour afficher le texte dans la langue actuelle.

## Configuration du Middleware pour l'Internationalisation (i18n)

Pour une gestion optimale des langues dans votre application, **Galsenext**
utilise un middleware dédié pour rediriger les utilisateurs vers la
version linguistique appropriée en fonction de leur préférence
linguistique ou de la langue par défaut de l'application.

### Middleware `i18n`

```bash
import { createI18nMiddleware } from "next-international/middleware";
import { NextRequest } from "next/server";

const I18nMiddleware = createI18nMiddleware({
  locales: ["en", "fr"],
  defaultLocale: "en",
});

export function middleware(request: NextRequest) {
  return I18nMiddleware(request);
}

export const config = {
  matcher: ["/((?!api|static|.*\\..*|_next|favicon.ico|robots.txt).*)"],
};
```

### Explication du Middleware

- `createI18nMiddleware` : Cette fonction génère un middleware pour gérer
  l'internationalisation dans l'application Next.js. Elle est configurée
  avec les langues supportées (`locales`) et la langue par défaut
  (`defaultLocale`).
- `middleware` : Cette fonction est exécutée à chaque requête, appliquant
  le middleware de redirection linguistique en fonction de la langue de
  l'utilisateur ou de la langue par défaut.
- `config` : La configuration du middleware spécifie les routes auxquelles
  il s'applique, excluant les API, les fichiers statiques, les fichiers
  générés par Next.js, et autres ressources non pertinentes.

### Pourquoi Utiliser ce Middleware ?

- **Redirection Automatique** : Redirige les utilisateurs vers leur langue
  préférée ou la langue par défaut, offrant une expérience utilisateur
  personnalisée.
- **Gestion Centralisée des Langues** : Simplifie la gestion des langues en concentrant la logique de sélection de langue en un seul endroit.
- **Support Multilingue Facile** : Rend votre application facilement adaptable pour un public global, en assurant que le bon contenu est servi à la bonne audience.
